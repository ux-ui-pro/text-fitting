{"mappings":"AAAe,uDAA0B;IACxC,OAAO,KAAK;IACZ,OAAO,KAAK;IACZ,iBAAiB,KAAK;IACtB,KAAK,KAAK;IAEV,aAAc;QACb,KAAK;QACL,IAAI,CAAC,YAAY,CAAC;YAAE,MAAM;QAAO,GAAG,SAAS,GAAG,CAAC;;;;;;;;;;;;;;;;;QAiB3C,CAAC;QAEP,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC;QAC1C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC;QAE1C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG;QAEpD,IAAI,CAAC,cAAc,GAAG,IAAI,eAAe,IAAI,CAAC,MAAM;QACpD,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI;IACtC;IAEA,SAAS;QACR,qBAAqB,IAAI,CAAC,EAAE;QAC5B,IAAI,CAAC,EAAE,GAAG,sBAAsB;YAC/B,MAAM,eAAe,SAAS,iBAAiB,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE;YACpE,MAAM,eAAe,KAAK,KAAK,CAAC,AAAC,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,GAAI;YAElF,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,eAAe,CAAC,EAAE,aAAa,EAAE,CAAC;QAC/D;IACD,EAAC;IAED,SAAS,IAAI,EAAE,KAAK,EAAE;QACrB,IAAI;QAEJ,OAAO;YACN,MAAM,OAAO;YACb,MAAM,UAAU,IAAI;YAEpB,IAAI,CAAC,YAAY;gBAChB,KAAK,KAAK,CAAC,SAAS;gBAEpB,aAAa;gBAEb,WAAW,IAAO,aAAa,OAAQ;YACxC;QACD;IACD;IAEA,oBAAoB;QACnB,IAAI,CAAC,MAAM;IACZ;IAEA,uBAAuB;QACtB,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI;QAEvC,qBAAqB,IAAI,CAAC,EAAE;IAC7B;AACD;AAEA,eAAe,GAAG,CAAC,mBAAmB,eAAe,MAAM,CAAC,gBAAgB","sources":["src/index.js"],"sourcesContent":["export default class TextFitting extends HTMLElement {\r\n\twrap = null;\r\n\tbody = null;\r\n\tresizeObserver = null;\r\n\taf = null;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.attachShadow({ mode: 'open' }).innerHTML = `\r\n            <style>\r\n                :host {\r\n                    --font-size: 16px;\r\n                }\r\n                #wrap {\r\n                    display: flex;\r\n                    justify-content: center;\r\n                }\r\n                #body {\r\n                    white-space: nowrap;\r\n                    font-size: var(--font-size);\r\n                }\r\n            </style>\r\n            <div id=\"wrap\">\r\n                <div id=\"body\"><slot></slot></div>\r\n            </div>\r\n        `;\r\n\r\n\t\tthis.wrap = this.shadowRoot.querySelector('#wrap');\r\n\t\tthis.body = this.shadowRoot.querySelector('#body');\r\n\r\n\t\tthis.update = this.throttle(this.update.bind(this), 100);\r\n\r\n\t\tthis.resizeObserver = new ResizeObserver(this.update);\r\n\t\tthis.resizeObserver.observe(this.wrap);\r\n\t}\r\n\r\n\tupdate = () => {\r\n\t\tcancelAnimationFrame(this.af);\r\n\t\tthis.af = requestAnimationFrame(() => {\r\n\t\t\tconst bodyFontSize = parseInt(getComputedStyle(this.body).fontSize, 10);\r\n\t\t\tconst calcFontSize = Math.floor((this.wrap.clientWidth / this.body.scrollWidth) * bodyFontSize);\r\n\r\n\t\t\tthis.body.style.setProperty('--font-size', `${calcFontSize}px`);\r\n\t\t});\r\n\t}\r\n\r\n\tthrottle(func, limit) {\r\n\t\tlet inThrottle;\r\n\r\n\t\treturn function() {\r\n\t\t\tconst args = arguments;\r\n\t\t\tconst context = this;\r\n\r\n\t\t\tif (!inThrottle) {\r\n\t\t\t\tfunc.apply(context, args);\r\n\r\n\t\t\t\tinThrottle = true;\r\n\r\n\t\t\t\tsetTimeout(() => (inThrottle = false), limit);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tconnectedCallback() {\r\n\t\tthis.update();\r\n\t}\r\n\r\n\tdisconnectedCallback() {\r\n\t\tthis.resizeObserver.unobserve(this.wrap);\r\n\r\n\t\tcancelAnimationFrame(this.af);\r\n\t}\r\n}\r\n\r\ncustomElements.get('text-fitting') || customElements.define('text-fitting', TextFitting);\r\n"],"names":[],"version":3,"file":"index.module.js.map"}