{"mappings":"AAAe,uDAA0B;IACxC,aAAc;QACb,KAAK;QAEL,MAAM,aAAa,IAAI,CAAC,YAAY,CAAC;YAAE,MAAM;QAAO;QAEpD,WAAW,SAAS,GAAG,CAAC,uDAAuD,CAAC;QAEhF,IAAI,CAAC,IAAI,GAAG,WAAW,aAAa,CAAC;QACrC,IAAI,CAAC,IAAI,GAAG,WAAW,aAAa,CAAC;QAErC,IAAI,CAAC,MAAM,GAAG,IAAM;YACnB,CAAC,IAAI,CAAC,WAAW,IAAI,qBAAqB,IAAI,CAAC,EAAE;YAEjD,IAAI,CAAC,EAAE,GAAG,sBAAsB,IAAM;gBACrC,MAAM,eAAe,SAAS,iBAAiB,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE;gBACpE,MAAM,eAAe,KAAK,KAAK,CAAC,AAAC,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,GAAI;gBAElF,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG;gBAC1B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG;gBACjC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG;gBAC7B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,CAAC,EAAE,aAAa,EAAE,CAAC;YAC/C;YAEA,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI;QACtC;QAEA,IAAI,CAAC,EAAE,GAAG,IAAI;QACd,IAAI,CAAC,cAAc,GAAG,IAAI,eAAe,IAAI,CAAC,MAAM;QACpD,IAAI,CAAC,WAAW,GAAG,IAAI;IACxB;IAEA,SAAS;QACR,IAAI,CAAC,WAAW,GAAG,KAAK;QACxB,IAAI,CAAC,MAAM;IACZ;IAEA,UAAU;QACT,IAAI,CAAC,WAAW,GAAG,IAAI;QACvB,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI;QACvC,IAAI,CAAC,EAAE,GAAG,IAAI;QACd,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG;QAC1B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG;QACjC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG;QAC7B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;IAC5B;IAEA,OAAO,OAAO;QACb,MAAM,eAAe,SAAS,gBAAgB,CAAC;QAC/C,aAAa,OAAO,CAAC,CAAA,cAAe,YAAY,MAAM;IACvD;IAEA,OAAO,UAAU;QAChB,MAAM,eAAe,SAAS,gBAAgB,CAAC;QAC/C,aAAa,OAAO,CAAC,CAAA,cAAe,YAAY,OAAO;IACxD;AACD;AAEA,eAAe,GAAG,CAAC,mBAAmB,eAAe,MAAM,CAAC,gBAAgB","sources":["src/index.js"],"sourcesContent":["export default class TextFitting extends HTMLElement {\r\n\tconstructor() {\r\n\t\tsuper()\r\n\r\n\t\tconst shadowOpen = this.attachShadow({ mode: 'open' })\r\n\r\n\t\tshadowOpen.innerHTML = `<div id=\"wrap\"><div id=\"body\"><slot></slot></div></div>`\r\n\r\n\t\tthis.wrap = shadowOpen.querySelector('#wrap')\r\n\t\tthis.body = shadowOpen.querySelector('#body')\r\n\r\n\t\tthis.resize = () => {\r\n\t\t\t!this.isUnmounted && cancelAnimationFrame(this.af)\r\n\r\n\t\t\tthis.af = requestAnimationFrame(() => {\r\n\t\t\t\tconst bodyFontSize = parseInt(getComputedStyle(this.body).fontSize, 10)\r\n\t\t\t\tconst calcFontSize = Math.floor((this.wrap.clientWidth / this.body.scrollWidth) * bodyFontSize)\r\n\r\n\t\t\t\tthis.wrap.style.display = 'flex'\r\n\t\t\t\tthis.wrap.style.justifyContent = 'center'\r\n\t\t\t\tthis.body.style.whiteSpace = 'nowrap'\r\n\t\t\t\tthis.body.style.fontSize = `${calcFontSize}px`\r\n\t\t\t})\r\n\r\n\t\t\tthis.resizeObserver.observe(this.wrap)\r\n\t\t}\r\n\r\n\t\tthis.af = null\r\n\t\tthis.resizeObserver = new ResizeObserver(this.resize)\r\n\t\tthis.isUnmounted = true\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tthis.isUnmounted = false\r\n\t\tthis.resize()\r\n\t}\r\n\r\n\tunmount() {\r\n\t\tthis.isUnmounted = true\r\n\t\tthis.resizeObserver.unobserve(this.wrap)\r\n\t\tthis.af = null\r\n\t\tthis.wrap.style.display = ''\r\n\t\tthis.wrap.style.justifyContent = ''\r\n\t\tthis.body.style.whiteSpace = ''\r\n\t\tthis.body.style.fontSize = ''\r\n\t}\r\n\r\n\tstatic init() {\r\n\t\tconst textFittings = document.querySelectorAll('text-fitting')\r\n\t\ttextFittings.forEach(textFitting => textFitting.update())\r\n\t}\r\n\r\n\tstatic destroy() {\r\n\t\tconst textFittings = document.querySelectorAll('text-fitting')\r\n\t\ttextFittings.forEach(textFitting => textFitting.unmount())\r\n\t}\r\n}\r\n\r\ncustomElements.get('text-fitting') || customElements.define('text-fitting', TextFitting)"],"names":[],"version":3,"file":"index.module.js.map"}